{"version":3,"file":"static/js/213.41dd7fe7.chunk.js","mappings":"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","sources":["webpack://my-app/./src/pages/Auth/auth.module.scss?e026","pages/Auth/Register.tsx","hooks/useAuth.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"authContainer\":\"auth_authContainer__v9O3Z\",\"authWrap\":\"auth_authWrap__5-S-9\",\"authForm\":\"auth_authForm__Po0S-\",\"formGroup\":\"auth_formGroup__Q77ja\",\"formInput\":\"auth_formInput__SMffn\",\"errorMessage\":\"auth_errorMessage__pymrH\",\"submitButton\":\"auth_submitButton__8iOR6\",\"authLink\":\"auth_authLink__RoS-z\"};","import { useState, FormEvent, ChangeEvent } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../../hooks/useAuth';\nimport css from './auth.module.scss';\n\nexport default function Register() {\n  const { handleRegister } = useAuth();\n  const [email, setEmail] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [hasSubmitted, setHasSubmitted] = useState(false);\n\n  const handleEmailChange = (e: ChangeEvent<HTMLInputElement>) => setEmail(e.target.value);\n  const handleUsernameChange = (e: ChangeEvent<HTMLInputElement>) => setUsername(e.target.value);\n  const handlePasswordChange = (e: ChangeEvent<HTMLInputElement>) => setPassword(e.target.value);\n  const handleConfirmPasswordChange = (e: ChangeEvent<HTMLInputElement>) => setConfirmPassword(e.target.value);\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setHasSubmitted(true);\n    setErrorMessage('');\n\n    if (password !== confirmPassword) {\n      setErrorMessage('Паролі не співпадають');\n      return;\n    }\n\n    const result = await handleRegister({ email, username, password });\n\n    if (!result.success) {\n      setErrorMessage(result.error);\n    }\n  };\n\n  return (\n    <div className={css.authWrap}>\n      <div className={css.authContainer}>\n        <h1>Register</h1>\n        <form onSubmit={handleSubmit} className={css.authForm}>\n          <div className={css.formGroup}>\n            <label htmlFor=\"email\">Email:</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={email}\n              onChange={handleEmailChange}\n              required\n              className={css.formInput}\n            />\n          </div>\n          <div className={css.formGroup}>\n            <label htmlFor=\"username\">Username:</label>\n            <input\n              type=\"text\"\n              id=\"username\"\n              value={username}\n              onChange={handleUsernameChange}\n              required\n              className={css.formInput}\n            />\n          </div>\n          <div className={css.formGroup}>\n            <label htmlFor=\"password\">Password:</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={password}\n              onChange={handlePasswordChange}\n              required\n              className={css.formInput}\n            />\n          </div>\n          <div className={css.formGroup}>\n            <label htmlFor=\"confirmPassword\">Підтвердіть пароль:</label>\n            <input\n              type=\"password\"\n              id=\"confirmPassword\"\n              value={confirmPassword}\n              onChange={handleConfirmPasswordChange}\n              required\n              className={css.formInput}\n            />\n          </div>\n          {hasSubmitted && errorMessage && <div className={css.errorMessage}>{errorMessage}</div>}\n          <button type=\"submit\" className={css.submitButton}>\n            Register\n          </button>\n        </form>\n        <p className={css.authLink}>\n          Already have an account? <Link to=\"/auth/login\">Login</Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n","import { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { authService, LoginData, RegisterData } from '../api/services';\nimport { login } from '../store/slices/authSlice';\n\nexport const useAuth = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const handleLogin = useCallback(\n    async (loginData: LoginData) => {\n      try {\n        const authResponse = await authService.login(loginData);\n        const userResponse = await authService.getUserByEmailWithToken(loginData.email, authResponse.token);\n        const user = userResponse[0];\n\n        dispatch(\n          login({\n            token: authResponse.token,\n            refreshToken: authResponse.refreshToken,\n            user: {\n              id: user.id,\n              email: user.email,\n              username: user.username,\n            },\n          })\n        );\n\n        navigate('/');\n        return { success: true };\n      } catch (error: any) {\n        const message = error.response?.data?.message || 'User with this email or password not found';\n        return { success: false, error: message };\n      }\n    },\n    [dispatch, navigate]\n  );\n\n  const handleRegister = useCallback(\n    async (registerData: RegisterData) => {\n      try {\n        const authResponse = await authService.register(registerData);\n        const userResponse = await authService.getUserByEmailWithToken(registerData.email, authResponse.token);\n        const user = userResponse[0];\n\n        dispatch(\n          login({\n            token: authResponse.token,\n            refreshToken: authResponse.refreshToken,\n            user: {\n              id: user.id,\n              email: user.email,\n              username: user.username,\n            },\n          })\n        );\n\n        navigate('/');\n        return { success: true };\n      } catch (error: any) {\n        const message = error.response?.data?.message || 'Registration error';\n        return { success: false, error: message };\n      }\n    },\n    [dispatch, navigate]\n  );\n\n  return {\n    handleLogin,\n    handleRegister,\n  };\n}; "],"names":["Register","handleRegister","useAuth","email","setEmail","useState","username","setUsername","password","setPassword","confirmPassword","setConfirmPassword","errorMessage","setErrorMessage","hasSubmitted","setHasSubmitted","_jsx","className","css","authWrap","children","_jsxs","authContainer","onSubmit","async","e","preventDefault","result","success","error","authForm","formGroup","htmlFor","type","id","value","onChange","target","required","formInput","submitButton","authLink","Link","to","dispatch","useDispatch","navigate","useNavigate","handleLogin","useCallback","authResponse","authService","login","loginData","user","getUserByEmailWithToken","token","refreshToken","_error$response","_error$response$data","response","data","message","register","registerData","_error$response2","_error$response2$data"],"sourceRoot":""}