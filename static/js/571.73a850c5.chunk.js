"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[571],{31:(e,a,s)=>{s.d(a,{A:()=>r});const r={authContainer:"auth_authContainer__v9O3Z",authWrap:"auth_authWrap__5-S-9",authForm:"auth_authForm__Po0S-",formGroup:"auth_formGroup__Q77ja",formInput:"auth_formInput__SMffn",errorMessage:"auth_errorMessage__pymrH",submitButton:"auth_submitButton__8iOR6",authLink:"auth_authLink__RoS-z"}},571:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var r=s(43),t=s(2),n=s(752),i=s(31),o=s(579);function u(){const{handleLogin:e}=(0,n.A)(),[a,s]=(0,r.useState)(""),[u,l]=(0,r.useState)(""),[h,c]=(0,r.useState)(""),[m,d]=(0,r.useState)(!1);return(0,o.jsx)("div",{className:i.A.authWrap,children:(0,o.jsxs)("div",{className:i.A.authContainer,children:[(0,o.jsx)("h1",{children:"Login"}),(0,o.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),d(!0),c("");const r=await e({email:a,password:u});r.success||c(r.error)},className:i.A.authForm,children:[(0,o.jsxs)("div",{className:i.A.formGroup,children:[(0,o.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,o.jsx)("input",{type:"email",id:"email",value:a,onChange:e=>s(e.target.value),required:!0,className:i.A.formInput})]}),(0,o.jsxs)("div",{className:i.A.formGroup,children:[(0,o.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,o.jsx)("input",{type:"password",id:"password",value:u,onChange:e=>l(e.target.value),required:!0,className:i.A.formInput})]}),m&&h&&(0,o.jsx)("div",{className:i.A.errorMessage,children:h}),(0,o.jsx)("button",{type:"submit",className:i.A.submitButton,children:"Login"})]}),(0,o.jsxs)("p",{className:i.A.authLink,children:["Don't have an account? ",(0,o.jsx)(t.N_,{to:"/auth/register",children:"Register"})]})]})})}},752:(e,a,s)=>{s.d(a,{A:()=>u});var r=s(43),t=s(3),n=s(2),i=s(847),o=s(630);const u=()=>{const e=(0,t.wA)(),a=(0,n.Zp)();return{handleLogin:(0,r.useCallback)((async s=>{try{const r=await i.y.login(s),t=(await i.y.getUserByEmailWithToken(s.email,r.token))[0];return e((0,o.iD)({token:r.token,refreshToken:r.refreshToken,user:{id:t.id,email:t.email,username:t.username}})),a("/"),{success:!0}}catch(n){var r,t;return{success:!1,error:(null===(r=n.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||"User with this email or password not found"}}}),[e,a]),handleRegister:(0,r.useCallback)((async s=>{try{const r=await i.y.register(s),t=(await i.y.getUserByEmailWithToken(s.email,r.token))[0];return e((0,o.iD)({token:r.token,refreshToken:r.refreshToken,user:{id:t.id,email:t.email,username:t.username}})),a("/"),{success:!0}}catch(n){var r,t;return{success:!1,error:(null===(r=n.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||"Registration error"}}}),[e,a])}}}}]);
//# sourceMappingURL=571.73a850c5.chunk.js.map