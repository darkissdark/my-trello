{"version":3,"file":"static/js/571.9393a186.chunk.js","mappings":"8GACA,SAAgB,iBAAiB,6BAA6B,YAAY,wBAAwB,aAAa,yBAAyB,aAAa,yBAAyB,aAAa,yBAAyB,aAAa,yBAAyB,yBAAyB,qCAAqC,oBAAoB,gCAAgC,OAAS,qBAAqB,KAAO,mBAAmB,KAAO,mBAAmB,OAAS,qBAAqB,KAAO,mBAAmB,OAAS,qBAAqB,cAAc,0BAA0B,gBAAgB,4BAA4B,YAAY,wB,2GCMrmB,SAASA,IACtB,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OAEVC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAcC,IAAmBJ,EAAAA,EAAAA,UAAS,KAC1CK,EAAcC,IAAmBN,EAAAA,EAAAA,WAAS,GAsCjD,OACEO,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAAA,EAAI,aAAaC,UAC/BC,EAAAA,EAAAA,MAAA,OAAKH,UAAWC,EAAAA,EAAI,kBAAkBC,SAAA,EACpCH,EAAAA,EAAAA,KAAA,MAAIC,UAAWC,EAAAA,EAAI,cAAcC,SAAC,8BAElCC,EAAAA,EAAAA,MAAA,QAAMC,SAtCSC,UACnBC,EAAEC,iBACFT,GAAgB,GAChBF,EAAgB,IAEhB,IACE,MAAM,KAAEY,SAAeC,EAAAA,EAAIC,KAAK,SAAU,CAAEpB,QAAOG,aAM7CkB,SAJgBF,EAAAA,EAAIG,IAAI,yBAADC,OAA0BC,mBAAmBxB,IAAU,CAClFyB,QAAS,CAAEC,cAAc,UAADH,OAAYL,EAAKS,WAGtBT,KAAK,GAE1BpB,GACE8B,EAAAA,EAAAA,IAAM,CACJD,MAAOT,EAAKS,MACZE,aAAcX,EAAKW,aACnBR,KAAM,CACJS,GAAIT,EAAKS,GACT9B,MAAOqB,EAAKrB,MACZ+B,SAAUV,EAAKU,aAKrBnC,EAAS,IACX,CAAE,MAAOoC,GAAW,IAADC,EAAAC,EACjB,MAAMC,GAAsB,QAAZF,EAAAD,EAAII,gBAAQ,IAAAH,GAAM,QAANC,EAAZD,EAAcf,YAAI,IAAAgB,OAAN,EAAZA,EAAoBC,UAAW,6OAC/C7B,EAAgB6B,EAClB,GAQkCE,YAAU,EAAAzB,SAAA,EACtCH,EAAAA,EAAAA,KAAA,SAAO6B,QAAQ,QAAQ5B,UAAWC,EAAAA,EAAI,cAAcC,SAAC,WAGrDH,EAAAA,EAAAA,KAAA,SACEqB,GAAG,QACHpB,UAAWC,EAAAA,EAAI,cACf4B,KAAK,QACLC,YAAY,QACZC,MAAOzC,EACP0C,SAnDiB1B,GAAqCf,EAASe,EAAE2B,OAAOF,OAoDxEG,UAAQ,KAGVnC,EAAAA,EAAAA,KAAA,SAAO6B,QAAQ,WAAW5B,UAAWC,EAAAA,EAAI,cAAcC,SAAC,0CAGxDH,EAAAA,EAAAA,KAAA,SACEqB,GAAG,WACHpB,UAAWC,EAAAA,EAAI,cACf4B,KAAK,WACLC,YAAY,uCACZC,MAAOtC,EACPuC,SA/DoB1B,GAAqCZ,EAAYY,EAAE2B,OAAOF,OAgE9EG,UAAQ,IAGTrC,GAAgBF,IAAgBI,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAAA,EAAI,cAAcC,SAAEP,KAErEI,EAAAA,EAAAA,KAAA,UAAQ8B,KAAK,SAAS7B,UAAS,GAAAa,OAAKZ,EAAAA,EAAI,eAAc,gBAAeC,SAAC,6CAKxEC,EAAAA,EAAAA,MAAA,OAAKH,UAAWC,EAAAA,EAAI,iBAAiBC,SAAA,CAAC,kEACtB,KACdH,EAAAA,EAAAA,KAACoC,EAAAA,GAAI,CAACC,GAAG,iBAAiBpC,UAAWC,EAAAA,EAAI,aAAaC,SAAC,sGAOjE,C","sources":["webpack://my-app/./src/pages/Auth/auth.module.scss?e026","pages/Auth/Login.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"auth-container\":\"auth_auth-container__7tusj\",\"auth-wrap\":\"auth_auth-wrap__W9iC3\",\"auth-title\":\"auth_auth-title__OZxWV\",\"auth-label\":\"auth_auth-label__Bsngh\",\"auth-input\":\"auth_auth-input__eKEmR\",\"auth-error\":\"auth_auth-error__1hech\",\"auth-password-strength\":\"auth_auth-password-strength__cIn05\",\"auth-password-bar\":\"auth_auth-password-bar__jYQ4N\",\"filled\":\"auth_filled__C2ld9\",\"weak\":\"auth_weak__Halzm\",\"fair\":\"auth_fair__MReUZ\",\"medium\":\"auth_medium__0Q61c\",\"good\":\"auth_good__wy4QT\",\"strong\":\"auth_strong__kDTw4\",\"auth-button\":\"auth_auth-button__wlfKN\",\"auth-link-row\":\"auth_auth-link-row__QFm8x\",\"auth-link\":\"auth_auth-link__JlDhg\"};","import { useState, FormEvent, ChangeEvent } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../../store/slices/authSlice';\nimport api from '../../api/request';\nimport css from './auth.module.scss';\n\nexport default function Login() {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [hasSubmitted, setHasSubmitted] = useState(false);\n\n  const handleEmailChange = (e: ChangeEvent<HTMLInputElement>) => setEmail(e.target.value);\n  const handlePasswordChange = (e: ChangeEvent<HTMLInputElement>) => setPassword(e.target.value);\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setHasSubmitted(true);\n    setErrorMessage('');\n\n    try {\n      const { data } = await api.post('/login', { email, password });\n\n      const userRes = await api.get(`/user?emailOrUsername=${encodeURIComponent(email)}`, {\n        headers: { Authorization: `Bearer ${data.token}` },\n      });\n\n      const user = userRes.data[0];\n\n      dispatch(\n        login({\n          token: data.token,\n          refreshToken: data.refreshToken,\n          user: {\n            id: user.id,\n            email: user.email,\n            username: user.username,\n          },\n        })\n      );\n\n      navigate('/');\n    } catch (err: any) {\n      const message = err.response?.data?.message || 'Користувач з таким email або паролем не знайдений';\n      setErrorMessage(message);\n    }\n  };\n\n  return (\n    <div className={css['auth-wrap']}>\n      <div className={css['auth-container']}>\n        <h2 className={css['auth-title']}>Вхід</h2>\n\n        <form onSubmit={handleSubmit} noValidate>\n          <label htmlFor=\"email\" className={css['auth-label']}>\n            Email\n          </label>\n          <input\n            id=\"email\"\n            className={css['auth-input']}\n            type=\"email\"\n            placeholder=\"Email\"\n            value={email}\n            onChange={handleEmailChange}\n            required\n          />\n\n          <label htmlFor=\"password\" className={css['auth-label']}>\n            Пароль\n          </label>\n          <input\n            id=\"password\"\n            className={css['auth-input']}\n            type=\"password\"\n            placeholder=\"Пароль\"\n            value={password}\n            onChange={handlePasswordChange}\n            required\n          />\n\n          {hasSubmitted && errorMessage && <div className={css['auth-error']}>{errorMessage}</div>}\n\n          <button type=\"submit\" className={`${css['auth-button']} button blue`}>\n            Увійти\n          </button>\n        </form>\n\n        <div className={css['auth-link-row']}>\n          Вперше у нас?{' '}\n          <Link to=\"/auth/register\" className={css['auth-link']}>\n            Зареєструватися\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["Login","navigate","useNavigate","dispatch","useDispatch","email","setEmail","useState","password","setPassword","errorMessage","setErrorMessage","hasSubmitted","setHasSubmitted","_jsx","className","css","children","_jsxs","onSubmit","async","e","preventDefault","data","api","post","user","get","concat","encodeURIComponent","headers","Authorization","token","login","refreshToken","id","username","err","_err$response","_err$response$data","message","response","noValidate","htmlFor","type","placeholder","value","onChange","target","required","Link","to"],"sourceRoot":""}